(this.webpackJsonpitlike_manager=this.webpackJsonpitlike_manager||[]).push([[0],{1064:function(e,t,a){},1234:function(e,t){},1235:function(e,t,a){"use strict";a.r(t);a(575);var n=a(26),i=a(0),r=a.n(i),c=a(27),o=a.n(c),l=a(14),s=a(15),u=a(16),m=a(17),d=a(157),p=a(88),f=a(71),_=(a(63),a(12)),h=(a(110),a(36)),v=(a(102),a(30)),g=(a(79),a(9)),b=a(1237),E=a(1238),y=a(237),k=a.n(y),j=(a(590),a(546)),C=a.n(j),O=a(183),w=a.n(O),S=a(134),L=a.n(S);function I(e){for(var t=["0","1","2","3","4","5","6","7","8","9"],a="",n=0;n<e;n++){a+=t[Math.floor(9*Math.random())]}return a}function x(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";return new Promise((function(i,r){"GET"===(n=n.toUpperCase())?(a.itlike=I(5),e=w()({url:t,params:a})):"POST"===n&&(e=w()({method:n,url:t,data:a})),e.then((function(e){2===e.status?(R(),L.a.publish("tokenOut",{})):i(e)})).catch((function(e){r(e)}))}))}w.a.defaults.timeout=1e4,w.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8;",w.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.error(e)})),w.a.interceptors.response.use((function(e){return 200===e.status?Promise.resolve(e.data):Promise.reject(e.data)}),(function(e){console.log(e)}));var N=a(313),U=a.n(N),D=function(e,t){U.a.set(e,t)},T=function(e){return U.a.get(e)||{}},B="http://itlike.cwj.gold:3000",q="iTlike@#*09221``~~---++===yyyjhh",A="admin",M=function(){return x("/api/auth/admin/logout")},F=function(e){D(A,e)},R=function(){var e;e=A,U.a.remove(e)},z=function(){return T(A)},P=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-wrap"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:C.a,alt:""})),r.a.createElement("div",{className:"content"},r.a.createElement(h.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(t){var a,n,i=k()(t.password,q);(a=t.account,n=i,x("/api/auth/admin/login",{account:a,password:n},"post")).then((function(t){t&&1===t.status?(g.b.success(t.msg),F(t.data),e.props.history.replace("/")):t&&0===t.status?g.b.warning(t.msg):g.b.error("\u7f51\u7edc\u51fa\u73b0\u4e00\u70b9\u5c0f\u95ee\u9898")})).catch((function(e){g.b.error("\u670d\u52a1\u5668\u7aef\u5185\u90e8\u9519\u8bef")}))}},r.a.createElement(h.a.Item,{name:"account",rules:[{required:!0,message:"\u8d26\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(v.a,{prefix:r.a.createElement(b.a,{className:"site-form-item-icon"}),placeholder:"\u8bf7\u8f93\u5165\u8d26\u6237"})),r.a.createElement(h.a.Item,{name:"password",rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(v.a,{prefix:r.a.createElement(E.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})),r.a.createElement(h.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u5f55"))))))}}]),a}(i.Component),Y=Object(d.b)(null,null)(P),H=(a(167),a(92)),V=(a(323),a(137)),K=(a(714),a(118)),G=a(551),W=(a(717),a(552)),J=a.n(W),X=(a(718),V.a.Sider),Q=K.a.Item,Z=K.a.SubMenu,$=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={menuList:G,account_name:z().account_name,account_icon:z().account_icon},e._getOpenKeys=function(e,t){for(var a=0;a<e.length;a++){var n=e[a];if(n.children&&n.children.find((function(e){return e._key===t})))return n._key}return""},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;L.a.subscribe("changeAdminMsg",(function(t,a){"changeAdminMsg"===t&&e.setState({account_name:z().account_name,account_icon:z().account_icon})}))}},{key:"_renderMenu",value:function(e){var t=this;return e.map((function(e){return e.children?r.a.createElement(Z,{key:e._key,title:r.a.createElement("span",null,r.a.createElement("span",{className:"iconfont "+e.icon,style:t.props.collapsed?{fontSize:25,marginLeft:-8}:{}}),r.a.createElement("span",{style:t.props.collapsed?{display:"none"}:{}},e.title))},t._renderMenu(e.children)):r.a.createElement(Q,{key:e._key},r.a.createElement(p.b,{to:e._key},r.a.createElement("span",{className:"iconfont "+e.icon,style:t.props.collapsed?{fontSize:25,marginLeft:-8}:{}}),r.a.createElement("span",{style:t.props.collapsed?{display:"none"}:{}},e.title)))}))}},{key:"render",value:function(){var e=this.state,t=e.account_name,a=e.account_icon,n=e.menuList,i=this.props.location.pathname,c=this._getOpenKeys(n,i),o=i.substr(0,i.indexOf("/",2));return r.a.createElement(X,{trigger:null,collapsible:!0,collapsed:this.props.collapsed},r.a.createElement("div",{className:"logo"},r.a.createElement("div",{className:"avatar",style:this.props.collapsed?{width:40,height:40}:{}},r.a.createElement("img",{src:a?B+a:J.a,alt:""})),r.a.createElement("h4",null,t||"\u64a9\u8bfe\u5b66\u9662")),r.a.createElement(K.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[i],selectedKeys:[i,o],defaultOpenKeys:[c]},this._renderMenu(this.state.menuList)))}}]),a}(i.Component),ee=Object(f.g)($),te=a(1239),ae=a(1240),ne=a(1241),ie=(a(726),V.a.Header),re=H.a.confirm,ce=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i)))._logout=function(){re({title:"\u60a8\u786e\u5b9a\u9000\u51fa\u561b?",icon:r.a.createElement(te.a,null),content:"\u518d\u60f3\u60f3\u770b\u561b~",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){M().then((function(t){R(),t&&1===t.status?g.b.success(t.msg):g.b.success("\u670d\u52a1\u5668\u5185\u90e8\u51fa\u73b0\u95ee\u9898"),e.props.history.replace("/login")}))},onCancel:function(){}})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"_weather",value:function(){x("https://restapi.amap.com/v3/weatherInfo?key=".concat("9c3bb5b50f35a3f045417e6526fffe4f","&city=").concat("350100","&output=JSON")).then((function(e){console.log(e),e.status})).catch((function(e){console.log(e),g.b.error("\u7f51\u7edc\u5f02\u5e38: "+e)}))}},{key:"render",value:function(){return r.a.createElement(ie,{className:"header",style:{padding:0}},r.a.createElement(this.props.collapsed?ae.a:ne.a,{className:"trigger",onClick:this.props.toggle}),r.a.createElement("div",{className:"navbar-header"},r.a.createElement("h3",{className:"navbar-brand"},"\u5f15\u64ce\u8ba1\u5212-\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"),r.a.createElement("div",{className:"navbar-header-right"},r.a.createElement(_.a,{type:"danger",className:"exit-btn",onClick:this._logout},"\u9000\u51fa"))))}}]),a}(i.Component),oe=Object(f.g)(ce),le=(a(737),a(416),a(738),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.pathLink,a=e.iconClassName,n=e.cardMainTitle,i=e.cardSubTitle,c=e.bgColor;return r.a.createElement("div",{className:"cell",style:{backgroundColor:c}},r.a.createElement(p.b,{to:t,className:"cell-content"},r.a.createElement("i",{className:a}),r.a.createElement("h4",null,n),r.a.createElement("h5",null,i)))}}]),a}(r.a.Component)),se=Object(f.g)(le),ue=(a(87),a(52)),me=a(300),de=a.n(me),pe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._loadData=function(){x("/api/auth/home/source_count").then((function(e){var t=[];if(1===e.status){for(var a in e.data)t.push(e.data[a]);n.setState({data:t})}})).catch((function(e){console.log(e)}))},n.getOptions=function(){return{xAxis:{type:"category",data:["\u5e7c\u6559","\u804c\u573a\u4eba\u751f","\u6d3b\u52a8\u4e13\u533a","\u76f4\u64ad\u4e2d\u5fc3"]},yAxis:{type:"value"},series:[{data:n.state.data,type:"bar"}]}},n.state={data:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){return r.a.createElement(ue.a,{title:"\u5404\u7248\u5757\u8d44\u6e90\u603b\u6570\u91cf\u7edf\u8ba1"},r.a.createElement(de.a,{option:this.getOptions()}))}}]),a}(r.a.Component),fe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._loadData=function(){x("/api/auth/home/buy_count").then((function(e){var t=[];if(1===e.status){for(var a in e.data)t.push(e.data[a]);n.setState({data:t})}})).catch((function(e){console.log(e)}))},n.getOptions=function(){var e=n.state.data;return{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u5e7c\u6559\u8d44\u6e90","\u804c\u573a\u4eba\u751f","\u6d3b\u52a8\u4e13\u533a","\u76f4\u64ad\u8bfe\u5802"]},series:[{name:"\u8d2d\u4e70\u6570\u91cf",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:e[0],name:"\u5e7c\u6559\u8d44\u6e90"},{value:e[1],name:"\u804c\u573a\u4eba\u751f"},{value:e[2],name:"\u6d3b\u52a8\u4e13\u533a"},{value:e[3],name:"\u76f4\u64ad\u8bfe\u5802"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},n.state={data:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){return r.a.createElement(ue.a,{title:"\u5404\u4e1a\u52a1\u8d2d\u4e70\u6570\u91cf\u7edf\u8ba1"},r.a.createElement(de.a,{option:this.getOptions()}))}}]),a}(r.a.Component),_e=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"home-top"},r.a.createElement(se,{pathLink:"/home/common",iconClassName:"iconfont icon-hezuohuobanmiyueguanli",cardMainTitle:"\u901a\u7528\u914d\u7f6e",cardSubTitle:"\u5ba2\u6237\u7aef\u901a\u7528\u4fe1\u606f\u914d\u7f6e",bgColor:"red"}),r.a.createElement(se,{pathLink:"/",iconClassName:"iconfont icon-fuwudiqiu",cardMainTitle:"\u7ba1\u7406\u5458\u4e2d\u5fc3",cardSubTitle:"\u7ba1\u7406\u5458\u7ba1\u7406",bgColor:"purple"}),r.a.createElement(se,{pathLink:"/",iconClassName:"iconfont icon-shenjing",cardMainTitle:"\u7cfb\u7edf\u8bf4\u660e",cardSubTitle:"\u7cfb\u7edf\u4f7f\u7528\u8bf4\u660e",bgColor:"orange"})),r.a.createElement("div",{className:"home-content"},r.a.createElement("div",{className:"home-content-card"},r.a.createElement(pe,null)),r.a.createElement("div",{className:"home-content-card"},r.a.createElement(fe,null))))}}]),a}(r.a.Component),he=(a(105),a(64)),ve=(a(283),a(158)),ge=a(1242),be=a(1243);function Ee(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||g.b.error("\u8bf7\u4e0a\u4f20JPG/PNG\u56fe\u7247!");var a=e.size/1024/1024<2;return a||g.b.error("\u4e0a\u4f20\u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc72MB!"),t&&a}var ye=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,imageUrl:""},e.handleChange=function(t){if("uploading"!==t.file.status){if(t.file.response&&"done"===t.file.status&&1===t.file.response.status){var a=t.file.response.data.name;e.setState({imgUrl:B+a,loading:!1}),e.props.successCallBack(a)}}else e.setState({loading:!0})},e}return Object(s.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){e.upLoadImg&&this.setState({imageUrl:e.upLoadImg})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.imageUrl,n=this.props,i=n.upLoadBtnTitle,c=n.upLoadName,o=n.upLoadAction,l=r.a.createElement("div",null,t?r.a.createElement(ge.a,null):r.a.createElement(be.a,null),r.a.createElement("div",{style:{marginTop:8}},i));return r.a.createElement(ve.a,{name:c,listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:o,beforeUpload:Ee,onChange:this.handleChange},a?r.a.createElement("img",{src:a,alt:"avatar",style:{width:"100%"}}):l)}}]),a}(r.a.Component),ke=h.a.Item,je=v.a.TextArea,Ce=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={siteLogoUrl:""},n.homeFormRef=r.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;x("/api/auth/home/info").then((function(t){if(t&&1===t.status){var a=t.data;e.homeFormRef.current.setFieldsValue(a),e.setState({siteLogoUrl:a.site_logo})}})).catch((function(e){g.b.error("\u83b7\u53d6\u7f51\u7ad9\u914d\u7f6e\u4fe1\u606f\u5931\u8d25")}))}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){return!1}}},{key:"render",value:function(){var e=this,t=this.state.siteLogoUrl;return r.a.createElement(ue.a,{title:"add"===T("lifejob_tag")?"\u65b0\u589e\u804c\u573a\u4eba\u751f":"\u7f16\u8f91\u4eba\u751f\u8d44\u6e90"},r.a.createElement(h.a,Object.assign({},{labelCol:{xs:{span:4}},wrapperCol:{xs:{span:12}}},{onFinish:function(t){var a=e.state.siteLogoUrl;if(!a)return g.b.warn("\u8bf7\u4e0a\u4f20\u7f51\u7ad9LOGO");var n=t.site_name,i=t.site_keyword,r=t.site_des,c=t.site_copy,o=t.site_bei;(function(e,t,a,n,i,r,c){return x("/api/auth/home/edit",{token:e,site_name:t,site_keyword:a,site_des:n,site_logo:i,site_copy:r,site_bei:c},"post")})(z().token,n,i,r,a,c,o).then((function(t){t&&1===t.status&&(g.b.success(t.msg),e.props.history.goBack())})).catch((function(e){g.b.error("\u4fee\u6539\u7f51\u7ad9\u914d\u7f6e\u4fe1\u606f\u5931\u8d25")}))},ref:this.homeFormRef}),r.a.createElement(ke,{label:"\u7f51\u7ad9\u6807\u9898",name:"site_name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u6807\u9898"}]},r.a.createElement(v.a,{placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u6807\u9898"})),r.a.createElement(ke,{label:"\u5173\u952e\u5b57",name:"site_keyword",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u5173\u952e\u5b57"}]},r.a.createElement(je,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u5173\u952e\u5b57"})),r.a.createElement(ke,{label:"\u63cf\u8ff0",name:"site_des",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u63cf\u8ff0"}]},r.a.createElement(je,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u63cf\u8ff0"})),r.a.createElement(ke,{label:"\u7f51\u7ad9LOGO",name:"site_logo"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20LOGO",upLoadName:"site_logo",upLoadAction:"/api/auth/home/upload_home",upLoadImg:t?B+t:"",successCallBack:function(t){e.setState({siteLogoUrl:t})}})),r.a.createElement(ke,{label:"\u7248\u6743\u4fe1\u606f",name:"site_copy",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u7248\u6743\u4fe1\u606f"}]},r.a.createElement(v.a,{placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u7248\u6743\u4fe1\u606f"})),r.a.createElement(ke,{label:"\u5907\u6848\u53f7",name:"site_bei",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u5907\u6848\u53f7"}]},r.a.createElement(v.a,{placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u5907\u6848\u53f7"})),r.a.createElement(ke,{wrapperCol:{span:20}},r.a.createElement("div",{style:{textAlign:"center",marginTop:30}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"\u7acb\u5373\u63d0\u4ea4"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){return e.props.history.goBack()}},"\u53d6\u6d88")))))}}]),a}(r.a.Component),Oe=(a(1064),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"not-found"},r.a.createElement(_.a,{type:"primary",onClick:function(){return e.props.history.replace("/")}},"\u56de\u5230\u9996\u9875"))}}]),a}(r.a.Component)),we=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/home/common",component:Ce}),r.a.createElement(f.b,{path:"/home",component:_e}),r.a.createElement(f.b,{component:Oe}))}}]),a}(r.a.Component),Se=(a(113),a(66)),Le=(a(146),a(35)),Ie=a(1244),xe=a(55),Ne=a.n(xe),Ue=function(){return x("/api/auth/resource/r_category")},De=function(){return x("/api/auth/resource/r_classes")},Te=function(){return x("/api/auth/resource/r_Area")},Be=function(){return x("/api/auth/resource/r_format")},qe=function(){return x("/api/auth/resource/r_mate")},Ae=function(e,t){return x("/api/auth/resource/list",{page_num:e,page_size:t})},Me=h.a.Item,Fe=Le.a.Option,Re=ve.a.Dragger,ze=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={imageUrl:"",focusImgUrl:"",dragFileList:[],resource_category:[],resource_classes:[],resource_format:[],resource_mate:[],resource_area:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;Ue().then((function(t){t&&1===t.status&&e.setState({resource_category:t.data})})).catch((function(e){console.log(e)})),Te().then((function(t){t&&1===t.status&&e.setState({resource_area:t.data})})).catch((function(e){console.log(e)})),De().then((function(t){t&&1===t.status&&e.setState({resource_classes:t.data})})).catch((function(e){console.log(e)})),Be().then((function(t){t&&1===t.status&&e.setState({resource_format:t.data})})).catch((function(e){console.log(e)})),qe().then((function(t){t&&1===t.status&&e.setState({resource_mate:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.imageUrl,n=t.focusImgUrl,i=t.resource_category,c=t.resource_classes,o=t.resource_area,l=t.resource_format,s=t.resource_mate;return r.a.createElement(ue.a,{title:"\u65b0\u589e\u5e7c\u6559\u8d44\u6e90"},r.a.createElement(h.a,Object.assign({},{labelCol:{xs:{span:4}},wrapperCol:{xs:{span:12}}},{onFinish:function(t){var a=e.state,n=a.imageUrl,i=a.focusImgUrl,r=a.dragFileList;if(!r.length)return g.b.warn("\u8bf7\u4e0a\u4f20\u8d44\u6e90\u6587\u4ef6");var c=t.resource_name,o=t.resource_author,l=t.resource_category_id,s=t.resource_classes_id,u=t.resource_area_id,m=t.resource_mate_id,d=t.resource_format_id,p=t.resource_price,f=t.is_focus;if(!n)return g.b.warn("\u8bf7\u4e0a\u4f20\u8d44\u6e90\u5c01\u9762");var _=Ne()(new Date).format("YYYY-MM-DD HH:mm:ss");(function(e,t,a,n,i,r,c,o,l,s,u,m,d,p){return x("/api/auth/resource/add",{token:e,resource_name:t,resource_author:a,resource_publish_time:n,resource_content:i,resource_category_id:r,resource_classes_id:c,resource_area_id:o,resource_mate_id:l,resource_format_id:s,resource_img:u,resource_price:m,is_focus:d,focus_img:p},"post")})(z().token,c,o,_,r,l,s,u,m,d,n,p,f?1:0,i).then((function(t){1===(null===t||void 0===t?void 0:t.status)&&(g.b.success("\u6dfb\u52a0\u8d44\u6e90\u6210\u529f"),e.props.history.goBack())})).catch((function(){g.b.error("\u6dfb\u52a0\u8d44\u6e90\u5931\u8d25")}))}}),r.a.createElement(Me,{label:"\u8d44\u6e90\u540d\u79f0",name:"resource_name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u540d\u79f0"}]},r.a.createElement(v.a,null)),r.a.createElement(Me,{label:"\u8d44\u6e90\u4f5c\u8005",name:"resource_author",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f5c\u8005\u59d3\u540d"}]},r.a.createElement(v.a,null)),r.a.createElement(Me,{label:"\u6240\u5c5e\u5206\u7c7b",name:"resource_category_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"},i.map((function(e){return r.a.createElement(Fe,{key:e.id,value:e.id},e.category_name)})))),r.a.createElement(Me,{label:"\u6240\u5c5e\u73ed\u7ea7",name:"resource_classes_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u73ed\u7ea7"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u73ed\u7ea7"},c.map((function(e){return r.a.createElement(Fe,{key:e.id,value:e.id},e.classes_name)})))),r.a.createElement(Me,{label:"\u6240\u5c5e\u9886\u57df",name:"resource_area_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u9886\u57df"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u9886\u57df"},o.map((function(e){return r.a.createElement(Fe,{key:e.id,value:e.id},e.area_name)})))),r.a.createElement(Me,{label:"\u7d20\u6750\u9009\u62e9",name:"resource_mate_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u7d20\u6750"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u9886\u57df"},s.map((function(e){return r.a.createElement(Fe,{key:e.id,value:e.id},e.mate_name)})))),r.a.createElement(Me,{label:"\u683c\u5f0f\u9009\u62e9",name:"resource_format_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7d20\u6750\u683c\u5f0f"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u7d20\u6750\u683c\u5f0f"},l.map((function(e){return r.a.createElement(Fe,{key:e.id,value:e.id},e.format_name)})))),r.a.createElement(Me,{label:"\u8d44\u6e90\u4ef7\u683c",name:"resource_price",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u4ef7\u683c"}]},r.a.createElement(v.a,{type:"number",style:{width:120}})),r.a.createElement(Me,{label:"\u8d44\u6e90\u5c01\u9762\u56fe",name:"resource_img"},r.a.createElement(ye,{upLoadName:"resource_upload_img",upLoadImg:a?B+a:"",upLoadAction:"/api/auth/resource/upload_resource",upLoadBtnTitle:"\u4e0a\u4f20\u5c01\u9762",successCallBack:function(t){e.setState({imageUrl:t})}})),r.a.createElement(Me,{label:"\u9996\u9875\u8f6e\u64ad\u56fe",name:"focus_img"},r.a.createElement(ye,{upLoadName:"resource_upload_img",upLoadImg:n?B+n:"",upLoadAction:"/api/auth/resource/upload_resource",upLoadBtnTitle:"\u4e0a\u4f20\u7126\u70b9\u56fe",successCallBack:function(t){e.setState({focusImgUrl:t})}})),r.a.createElement(Me,{label:"\u662f\u5426\u8bbe\u7f6e\u7126\u70b9",name:"is_focus",valuePropName:"checked"},r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",disabled:!n})),r.a.createElement(Me,{label:"\u5e7c\u6559\u8d44\u6e90",name:"resource_content",valuePropName:"filelist"},r.a.createElement(Re,{name:"resource_file",multiple:!0,action:"/api/auth/resource/upload_many_file",onChange:function(t){var a=t.file.status;if("done"===a){if(t.file.response&&1===t.file.response.status){var n=e.state.dragFileList;n.push(t.file.response.data),e.setState({dragFileList:n})}g.b.success("".concat(t.file.name," \u6587\u4ef6\u4e0a\u4f20\u6210\u529f!"))}else"error"===a&&g.b.error("".concat(t.file.name," \u6587\u4ef6\u4e0a\u4f20\u5931\u8d25!"))},onRemove:function(t){var a=e.state.dragFileList;a=a.filter((function(e){return e.uid!==t.response.data.uid})),e.setState({dragFileList:a})}},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(Ie.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"\u5355\u51fb\u6216\u8005\u62d6\u52a8\u6587\u4ef6\u5230\u6b64\u533a\u57df\u4e0a\u4f20"),r.a.createElement("p",{className:"ant-upload-hint"},"\u652f\u6301\u5355\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u4e0a\u4f20"))),r.a.createElement(Me,{wrapperCol:{span:20}},r.a.createElement("div",{style:{textAlign:"center",marginTop:30}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){return e.props.history.goBack()}},"\u53d6\u6d88")))))}}]),a}(r.a.Component),Pe=(a(282),a(155)),Ye=(a(272),a(129)),He=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._loadData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;Ae(e,t).then((function(e){e&&1===e.status&&(g.b.success(e.msg),n.setState({resourceList:e.data.resource_list,totalSize:e.data.resource_count}))})).catch((function(){g.b.error("\u83b7\u53d6\u4eba\u751f\u5217\u8868\u5931\u8d25")}))},n.columns=[{title:"ID",dataIndex:"id",width:50,align:"center"},{title:"\u5e7c\u6559\u6807\u9898",dataIndex:"resource_name",align:"center"},{title:"\u5e7c\u6559\u5c01\u9762",dataIndex:"resource_img",render:function(e){return r.a.createElement("img",{src:e?B+e:"",alt:"\u8d44\u6e90\u5c01\u9762",style:{width:100}})},align:"center"},{title:"\u6240\u5c5e\u4f5c\u8005",dataIndex:"resource_author",align:"center"},{title:"\u6240\u5c5e\u5206\u7c7b",dataIndex:"category_name",align:"center"},{title:"\u9996\u9875\u7126\u70b9",dataIndex:"is_focus",render:function(e,t){return r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",defaultChecked:1===e,disabled:!t.focus_img,onChange:function(e){var a,n;(a=t.id,n=e?1:0,x("/api/auth/resource/set_focus_resource",{id:a,is_focus:n})).then((function(a){a&&1===a.status&&(Ye.a.success({message:"\u804c\u573a\u4eba\u751f:".concat(t.resource_name),description:"".concat(e?"\u8bbe\u7f6e\u4e3a":"\u53d6\u6d88","\u7126\u70b9\u8bfe\u7a0b")}),t.is_focus=e?1:0)}))}})},align:"center"},{title:"\u64cd\u4f5c",align:"center",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(_.a,{onClick:function(){n.props.history.push({pathname:"/resource/edit-resource",state:{resource:t}})}},"\u7f16\u8f91"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){H.a.confirm({title:"\u786e\u8ba4\u5220\u9664\u5417",content:"\u5220\u9664\u6b64\u8d44\u6e90\u6240\u6709\u5173\u8054\u7684\u5185\u5bb9\u90fd\u4f1a\u88ab\u5220\u9664",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var e;(e=t.id,x("/api/auth/resource/delete_resource",{id:e})).then((function(e){e&&1===e.status?(g.b.success(e.msg),n._loadData(n.state.pageNum,n.state.pageSize)):g.b.error("\u5220\u9664\u5931\u8d25")})).catch((function(){g.b.error("\u5220\u9664\u5931\u8d25")}))}})}},"\u5220\u9664"))}}],n.state={resourceList:[],totalSize:0,pageSize:4},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=r.a.createElement(_.a,{type:"primary",onClick:function(){e.props.history.push("/resource/add-resource")}},"\u6dfb\u52a0\u5e7c\u6559\u8d44\u6e90");return r.a.createElement("div",null,r.a.createElement(ue.a,{title:"\u5e7c\u6559\u8d44\u6e90\u5217\u8868",extra:t},r.a.createElement(Pe.a,{rowKey:"id",columns:this.columns,dataSource:this.state.resourceList,pagination:{total:this.state.totalSize,pageSize:this.state.pageSize,onChange:function(t,a){e._loadData(t,a)}}})))}}]),a}(r.a.Component),Ve=h.a.Item,Ke=Le.a.Option,Ge=ve.a.Dragger,We=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={imageUrl:"",focusImgUrl:"",resource_id:"",tag:"",dragFileList:[],resource_category:[],resource_classes:[],resource_format:[],resource_mate:[],resource_area:[]},n.resourceFormRef=r.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;if(this.props.location.state||(this.setState=function(){return!1},this.props.history.goBack()),this.props.location.state){var a=this.props.location.state.resource;if(a){var n=a.resource_img,i=a.focus_img,r=a.id,c=a.resource_content;this.resourceFormRef.current.setFieldsValue(a),this.setState({imageUrl:n,focusImgUrl:i,resource_id:r,tag:c}),(e=a.resource_content,x("/api/auth/resource/file_list",{tag:e})).then((function(e){t.setState({dragFileList:e.data})})).catch((function(e){console.log(e)}))}}Ue().then((function(e){e&&1===e.status&&t.setState({resource_category:e.data})})).catch((function(e){console.log(e)})),Te().then((function(e){e&&1===e.status&&t.setState({resource_area:e.data})})).catch((function(e){console.log(e)})),De().then((function(e){e&&1===e.status&&t.setState({resource_classes:e.data})})).catch((function(e){console.log(e)})),Be().then((function(e){e&&1===e.status&&t.setState({resource_format:e.data})})).catch((function(e){console.log(e)})),qe().then((function(e){e&&1===e.status&&t.setState({resource_mate:e.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.imageUrl,n=t.focusImgUrl,i=t.resource_category,c=t.resource_classes,o=t.resource_area,l=t.resource_format,s=t.resource_mate;return r.a.createElement(ue.a,{title:"\u7f16\u8f91\u5e7c\u6559\u8d44\u6e90"},r.a.createElement(h.a,Object.assign({},{labelCol:{xs:{span:4}},wrapperCol:{xs:{span:12}}},{onFinish:function(t){var a=e.state,n=a.resource_id,i=a.imageUrl,r=a.focusImgUrl,c=a.dragFileList,o=a.tag,l=t.resource_name,s=t.resource_author,u=t.resource_category_id,m=t.resource_classes_id,d=t.resource_area_id,p=t.resource_mate_id,f=t.resource_format_id,_=t.resource_price,h=t.is_focus;if(!i)return g.b.warn("\u8bf7\u4e0a\u4f20\u6d3b\u52a8\u5c01\u9762");var v=Ne()(new Date).format("YYYY-MM-DD HH:mm:ss");(function(e,t,a,n,i,r,c,o,l,s,u,m,d,p,f,_){return x("/api/auth/resource/edit",{token:e,id:t,tag:a,resource_name:n,resource_author:i,resource_publish_time:r,resource_content:c,resource_category_id:o,resource_classes_id:l,resource_area_id:s,resource_mate_id:u,resource_format_id:m,resource_img:d,resource_price:p,is_focus:f,focus_img:_},"post")})(z().token,n,o,l,s,v,c,u,m,d,p,f,i,_,h?1:0,r).then((function(t){console.log(t),1===(null===t||void 0===t?void 0:t.status)&&(g.b.success("\u4fee\u6539\u8d44\u6e90\u6210\u529f"),e.props.history.goBack())})).catch((function(){g.b.error("\u4fee\u6539\u8d44\u6e90\u5931\u8d25")}))},ref:this.resourceFormRef}),r.a.createElement(Ve,{label:"\u8d44\u6e90\u540d\u79f0",name:"resource_name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u540d\u79f0"}]},r.a.createElement(v.a,null)),r.a.createElement(Ve,{label:"\u8d44\u6e90\u4f5c\u8005",name:"resource_author",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f5c\u8005\u59d3\u540d"}]},r.a.createElement(v.a,null)),r.a.createElement(Ve,{label:"\u6240\u5c5e\u5206\u7c7b",name:"resource_category_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"},i.map((function(e){return r.a.createElement(Ke,{key:e.id,value:e.id},e.category_name)})))),r.a.createElement(Ve,{label:"\u6240\u5c5e\u73ed\u7ea7",name:"resource_classes_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u73ed\u7ea7"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u73ed\u7ea7"},c.map((function(e){return r.a.createElement(Ke,{key:e.id,value:e.id},e.classes_name)})))),r.a.createElement(Ve,{label:"\u6240\u5c5e\u9886\u57df",name:"resource_area_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u9886\u57df"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u9886\u57df"},o.map((function(e){return r.a.createElement(Ke,{key:e.id,value:e.id},e.area_name)})))),r.a.createElement(Ve,{label:"\u7d20\u6750\u9009\u62e9",name:"resource_mate_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u7d20\u6750"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u9886\u57df"},s.map((function(e){return r.a.createElement(Ke,{key:e.id,value:e.id},e.mate_name)})))),r.a.createElement(Ve,{label:"\u683c\u5f0f\u9009\u62e9",name:"resource_format_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7d20\u6750\u683c\u5f0f"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u7d20\u6750\u683c\u5f0f"},l.map((function(e){return r.a.createElement(Ke,{key:e.id,value:e.id},e.format_name)})))),r.a.createElement(Ve,{label:"\u8d44\u6e90\u4ef7\u683c",name:"resource_price",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u4ef7\u683c"}]},r.a.createElement(v.a,{type:"number",style:{width:120}})),r.a.createElement(Ve,{label:"\u8d44\u6e90\u5c01\u9762\u56fe",name:"resource_img"},r.a.createElement(ye,{upLoadName:"resource_upload_img",upLoadImg:a?B+a:"",upLoadAction:"/api/auth/resource/upload_resource",upLoadBtnTitle:"\u4e0a\u4f20\u5c01\u9762",successCallBack:function(t){e.setState({imageUrl:t})}})),r.a.createElement(Ve,{label:"\u9996\u9875\u8f6e\u64ad\u56fe",name:"focus_img"},r.a.createElement(ye,{upLoadName:"resource_upload_img",upLoadImg:n?B+n:"",upLoadAction:"/api/auth/resource/upload_resource",upLoadBtnTitle:"\u4e0a\u4f20\u7126\u70b9\u56fe",successCallBack:function(t){e.setState({focusImgUrl:t})}})),r.a.createElement(Ve,{label:"\u662f\u5426\u8bbe\u7f6e\u7126\u70b9",name:"is_focus",valuePropName:"checked"},r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",disabled:!n})),r.a.createElement(Ve,{label:"\u5e7c\u6559\u8d44\u6e90",name:"resource_content",valuePropName:"filelist"},r.a.createElement(Ge,{name:"resource_file",multiple:!0,action:"/api/auth/resource/upload_many_file",fileList:this.state.dragFileList,onChange:function(t){var a=t.file.status;if("done"===a){if(t.file.response&&1===t.file.response.status){var n=e.state.dragFileList;n.push(t.file.response.data),e.setState({dragFileList:n})}g.b.success("".concat(t.file.name," \u6587\u4ef6\u4e0a\u4f20\u6210\u529f!"))}else"error"===a&&g.b.error("".concat(t.file.name," \u6587\u4ef6\u4e0a\u4f20\u5931\u8d25!"))},onRemove:function(t){var a=e.state.dragFileList;a=a.filter((function(e){return e.uid!==t.uid})),e.setState({dragFileList:a})}},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(Ie.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"\u5355\u51fb\u6216\u8005\u62d6\u52a8\u6587\u4ef6\u5230\u6b64\u533a\u57df\u4e0a\u4f20"),r.a.createElement("p",{className:"ant-upload-hint"},"\u652f\u6301\u5355\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u4e0a\u4f20"))),r.a.createElement(Ve,{wrapperCol:{span:20}},r.a.createElement("div",{style:{textAlign:"center",marginTop:30}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"\u4fee\u6539"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){return e.props.history.goBack()}},"\u53d6\u6d88")))))}}]),a}(r.a.Component),Je=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/resource/add-resource",component:ze}),r.a.createElement(f.b,{path:"/resource/edit-resource",component:We}),r.a.createElement(f.b,{path:"/resource",component:He}),r.a.createElement(f.b,{component:Oe}))}}]),a}(r.a.Component),Xe=function(e,t){return x("/api/auth/lifejob/list",{page_num:e,page_size:t})},Qe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._loadData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;Xe(e,t).then((function(e){e&&1===e.status&&(g.b.success(e.msg),n.setState({lifeList:e.data.job_list,totalSize:e.data.job_count}))})).catch((function(){g.b.error("\u83b7\u53d6\u4eba\u751f\u5217\u8868\u5931\u8d25")}))},n.columns=[{title:"ID",dataIndex:"id",width:50,align:"center"},{title:"\u5e7c\u6559\u6807\u9898",dataIndex:"job_name",align:"center"},{title:"\u4eba\u751f\u5c01\u9762",dataIndex:"job_img",render:function(e){return r.a.createElement("img",{src:e?B+e:"",alt:"\u4eba\u751f\u5c01\u9762",style:{width:100}})},align:"center"},{title:"\u6240\u5c5e\u4f5c\u8005",dataIndex:"job_author",align:"center"},{title:"\u9996\u9875\u7126\u70b9",dataIndex:"is_focus",render:function(e,t){return r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",defaultChecked:1===e,disabled:!t.focus_img,onChange:function(e){var a,n;(a=t.id,n=e?1:0,x("/api/auth/lifejob/set_focus_job",{id:a,is_focus:n})).then((function(a){a&&1===a.status&&(Ye.a.success({message:"\u804c\u573a\u4eba\u751f:".concat(t.job_name),description:"".concat(e?"\u8bbe\u7f6e\u4e3a":"\u53d6\u6d88","\u7126\u70b9\u8bfe\u7a0b")}),t.is_focus=e?1:0)}))}})},align:"center"},{title:"\u64cd\u4f5c",align:"center",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(_.a,{onClick:function(){D("lifejob_tag","edit"),n.props.history.push({pathname:"/lifejob/add-edit",state:{job:t}})}},"\u7f16\u8f91"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){H.a.confirm({title:"\u786e\u8ba4\u5220\u9664\u5417",content:"\u5220\u9664\u6b64\u8d44\u6e90\u6240\u6709\u5173\u8054\u7684\u5185\u5bb9\u90fd\u4f1a\u88ab\u5220\u9664",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var e;(e=t.id,x("/api/auth/lifejob/delete_job",{id:e})).then((function(e){e&&1===e.status?(g.b.success(e.msg),n._loadData(n.state.pageNum,n.state.pageSize)):g.b.error("\u5220\u9664\u5931\u8d25")})).catch((function(){g.b.error("\u5220\u9664\u5931\u8d25")}))}})}},"\u5220\u9664"))}}],n.state={lifeList:[],totalSize:0,pageSize:4},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=r.a.createElement(_.a,{type:"primary",onClick:function(){D("lifejob_tag","add"),e.props.history.push("/lifejob/add-edit")}},"\u6dfb\u52a0\u4eba\u751f\u8d44\u6e90");return r.a.createElement("div",null,r.a.createElement(ue.a,{title:"\u804c\u573a\u4eba\u751f\u5217\u8868",extra:t},r.a.createElement(Pe.a,{rowKey:"id",columns:this.columns,dataSource:this.state.lifeList,pagination:{total:this.state.totalSize,pageSize:this.state.pageSize,onChange:function(t,a){e._loadData(t,a)}}})))}}]),a}(r.a.Component),Ze=a(212),$e=a.n(Ze),et=a(567),tt=a(314),at=a.n(tt),nt=(a(1184),a(387)),it=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={editorState:at.a.createEditorState(null)},e.getContent=function(){return e.state.editorState.toHTML()},e.submitContent=Object(et.a)($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.handleEditorChange=function(t){e.setState({editorState:t})},e.editorControls=["undo","redo","separator","font-size","line-height","letter-spacing","separator","text-color","bold","italic","underline","strike-through","separator","superscript","subscript","remove-styles","emoji","separator","text-indent","text-align","separator","headings","list-ul","list-ol","blockquote","code","separator","link","separator","hr","separator","separator","clear"],e.uploadHandler=function(t){if("uploading"!==t.file.status){if(t.file.response&&"done"===t.file.status&&1===t.file.response.status){var a=t.file.response.data.name;e.setState({editorState:nt.ContentUtils.insertMedias(e.state.editorState,[{type:"IMAGE",url:B+a}])})}}else e.setState({loading:!0})},e.extendControls=[{key:"antd-uploader",type:"component",component:r.a.createElement(ve.a,{action:e.props.upLoadAction,name:e.props.uploadName,onChange:e.uploadHandler,showUploadList:!1},r.a.createElement(_.a,{type:"button",className:"control-item button upload-button","data-title":"\u63d2\u5165\u56fe\u7247"},"\u63d2\u5165\u56fe\u7247"))}],e}return Object(s.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){e.htmlContent&&this.setState({editorState:at.a.createEditorState(e.htmlContent)})}},{key:"render",value:function(){var e=this.state.editorState;return r.a.createElement("div",{className:"my-component"},r.a.createElement(at.a,{controls:this.editorControls,extendControls:this.extendControls,value:e,onChange:this.handleEditorChange,onSave:this.submitContent,style:{border:"1px solid lightgray"}}))}}]),a}(r.a.Component),rt=h.a.Item,ct=Le.a.Option,ot=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={job_pre:[],job_family:[],id:"",job_content:"",imageUrl:"",focusImgUrl:""},n.lifejobFormRef=r.a.createRef(),n.lifejob_ref=r.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;if("edit"!==T("lifejob_tag")||this.props.location.state||this.props.history.goBack(),this.props.location.state){var t=this.props.location.state.job;t&&(this.lifejobFormRef.current.setFieldsValue(t),this.setState({id:t.id,job_content:t.job_content,imageUrl:t.job_img,focusImgUrl:t.focus_img}))}x("/api/auth/lifejob/job_pre").then((function(t){t&&1===t.status&&e.setState({job_pre:t.data})})).catch((function(e){console.log(e)})),x("/api/auth/lifejob/job_family").then((function(t){t&&1===t.status&&e.setState({job_family:t.data})})).catch((function(e){console.log(e)}))}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){return!1}}},{key:"render",value:function(){var e=this,t=this.state,a=t.imageUrl,n=t.focusImgUrl,i=t.job_pre,c=t.job_family,o=t.id;return r.a.createElement(ue.a,{title:"add"===T("lifejob_tag")?"\u65b0\u589e\u804c\u573a\u4eba\u751f":"\u7f16\u8f91\u4eba\u751f\u8d44\u6e90"},r.a.createElement(h.a,Object.assign({},{labelCol:{xs:{span:4}},wrapperCol:{xs:{span:12}}},{onFinish:function(t){var a=e.state,n=a.imageUrl,i=a.focusImgUrl;if(!n)return g.b.warn("\u8bf7\u4e0a\u4f20\u6d3b\u52a8\u5c01\u9762");var r=t.job_name,c=t.job_author,l=t.job_pre_edu_id,s=t.job_family_edu_id,u=t.is_focus,m=Ne()(new Date).format("YYYY-MM-DD HH:mm:ss"),d=e.lifejob_ref.current.getContent();o?function(e,t,a,n,i,r,c,o,l,s,u){return x("/api/auth/lifejob/edit",{token:e,id:t,job_name:a,job_img:n,job_author:i,job_time:r,job_content:c,job_pre_edu_id:o,job_family_edu_id:l,is_focus:s,focus_img:u},"post")}(z().token,o,r,n,c,m,d,l,s,u?"1":"0",i).then((function(t){1===(null===t||void 0===t?void 0:t.status)&&(g.b.success("\u4fee\u6539\u804c\u573a\u4eba\u751f\u6210\u529f"),e.props.history.goBack())})).catch((function(){g.b.error("\u4fee\u6539\u804c\u573a\u4eba\u751f\u5931\u8d25")})):function(e,t,a,n,i,r,c,o,l,s){return x("/api/auth/lifejob/add",{token:e,job_name:t,job_img:a,job_author:n,job_time:i,job_content:r,job_pre_edu_id:c,job_family_edu_id:o,is_focus:l,focus_img:s},"post")}(z().token,r,n,c,m,d,l,s,u?1:0,i).then((function(t){1===(null===t||void 0===t?void 0:t.status)&&(g.b.success("\u6dfb\u52a0\u804c\u573a\u4eba\u751f\u6210\u529f"),e.props.history.goBack())})).catch((function(){g.b.error("\u6dfb\u52a0\u804c\u573a\u4eba\u751f\u5931\u8d25")}))},ref:this.lifejobFormRef}),r.a.createElement(rt,{label:"\u4eba\u751f\u540d\u79f0",name:"job_name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u804c\u573a\u4eba\u751f\u540d\u79f0"}]},r.a.createElement(v.a,null)),r.a.createElement(rt,{label:"\u4eba\u751f\u4f5c\u8005",name:"job_author",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u804c\u573a\u4eba\u751f\u4f5c\u8005"}]},r.a.createElement(v.a,null)),r.a.createElement(rt,{label:"\u5b66\u524d\u6240\u5c5e\u5206\u7c7b",name:"job_pre_edu_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b66\u524d\u6240\u5c5e\u5206\u7c7b"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u5b66\u524d\u6240\u5c5e\u5206\u7c7b"},i.map((function(e){return r.a.createElement(ct,{key:e.id,value:e.id},e.pre_edu_name)})))),r.a.createElement(rt,{label:"\u6240\u5c5e\u5bb6\u56ed\u5206\u7c7b",name:"job_family_edu_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5bb6\u56ed\u5206\u7c7b"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5bb6\u56ed\u5206\u7c7b"},c.map((function(e){return r.a.createElement(ct,{key:e.id,value:e.id},e.job_family_name)})))),r.a.createElement(rt,{label:"\u4eba\u751f\u5c01\u9762\u56fe",name:"job_img"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u5c01\u9762\u56fe",upLoadName:"lifejob_img",upLoadAction:"/api/auth/lifejob/upload_lifejob",upLoadImg:a?B+a:"",successCallBack:function(t){e.setState({imageUrl:t})}})),r.a.createElement(rt,{label:"\u7126\u70b9\u56fe",name:"focus_img"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u7126\u70b9\u56fe",upLoadName:"lifejob_img",upLoadAction:"/api/auth/lifejob/upload_lifejob",upLoadImg:n?B+n:"",successCallBack:function(t){e.setState({focusImgUrl:t})}})),r.a.createElement(rt,{label:"\u662f\u5426\u8bbe\u7f6e\u7126\u70b9",name:"is_focus",valuePropName:"checked"},r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",disabled:!n})),r.a.createElement(rt,{label:"\u804c\u573a\u4eba\u751f\u5185\u5bb9",name:"job_content",wrapperCol:{span:20}},r.a.createElement(it,{uploadName:"lifejob_img",upLoadAction:"/api/auth/lifejob/upload_lifejob",htmlContent:this.state.job_content,ref:this.lifejob_ref})),r.a.createElement(rt,{wrapperCol:{span:20}},r.a.createElement("div",{style:{textAlign:"center",marginTop:30}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"add"===T("lifejob_tag")?"\u6dfb\u52a0":"\u4fee\u6539"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){return e.props.history.goBack()}},"\u53d6\u6d88")))))}}]),a}(r.a.Component),lt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/lifejob/add-edit",component:ot}),r.a.createElement(f.b,{path:"/lifejob",component:Qe}),r.a.createElement(f.b,{component:Oe}))}}]),a}(r.a.Component),st=(a(276),a(156)),ut=function(){return x("/api/auth/live/live_theme")},mt=function(){return x("/api/auth/live/live_person")},dt=function(e,t){return x("/api/auth/live/list",{page_num:e,page_size:t})},pt=h.a.Item,ft=Le.a.Option,_t=st.a.RangePicker,ht=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={imageUrl:"",focusImgUrl:"",live_theme:[],live_person:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;mt().then((function(t){t&&1===t.status&&e.setState({live_person:t.data})})).catch((function(e){console.log(e)})),ut().then((function(t){t&&1===t.status&&e.setState({live_theme:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.imageUrl,n=t.focusImgUrl,i=t.live_person,c=t.live_theme;return r.a.createElement(ue.a,{title:"\u65b0\u589e\u76f4\u64ad"},r.a.createElement(h.a,Object.assign({},{labelCol:{xs:{span:4}},wrapperCol:{xs:{span:12}}},{onFinish:function(t){console.log(t);var a=e.state,n=a.imageUrl,i=a.focusImgUrl,r=t.live_title,c=t.live_author,o=t.live_price,l=t.live_person_id,s=t.live_theme_id,u=t.is_focus,m=t.live_url;if(!n)return g.b.warning("\u8bf7\u4e0a\u4f20\u76f4\u64ad\u5c01\u9762");var d=Ne()(t.live_time[0]).format("YYYY-MM-DD HH:mm:ss"),p=Ne()(t.live_time[1]).format("YYYY-MM-DD HH:mm:ss");(function(e,t,a,n,i,r,c,o,l,s,u,m){return x("/api/auth/live/add",{token:e,live_title:t,live_author:a,live_img:n,live_begin_time:i,live_end_time:r,live_price:c,live_person_id:o,live_theme_id:l,is_focus:s,focus_img:u,live_url:m},"post")})(z().token,r,c,n,d,p,o,l,s,u?1:0,i,m).then((function(t){t&&1===t.status&&(g.b.success(t.msg),e.props.history.goBack())})).catch((function(){g.b.error("\u6dfb\u52a0\u76f4\u64ad\u8bfe\u5931\u8d25")}))}}),r.a.createElement(pt,{label:"\u76f4\u64ad\u540d\u79f0",name:"live_title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u540d\u79f0"}]},r.a.createElement(v.a,null)),r.a.createElement(pt,{label:"\u76f4\u64ad\u8001\u5e08",name:"live_author",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u8001\u5e08"}]},r.a.createElement(v.a,null)),r.a.createElement(pt,{label:"\u76f4\u64ad\u4ef7\u683c",name:"live_price",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u4ef7\u683c"}]},r.a.createElement(v.a,{type:"number"})),r.a.createElement(pt,{label:"\u76f4\u64ad\u65f6\u95f4",name:"live_time",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u76f4\u64ad\u65f6\u95f4"}]},r.a.createElement(_t,{showTime:!0})),r.a.createElement(pt,{wrapperCol:{span:5},label:"\u9002\u7528\u4eba\u7fa4",name:"live_person_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9002\u7528\u4eba\u7fa4"}]},r.a.createElement(Le.a,{placeholder:"\u8bf7\u9009\u62e9\u9002\u7528\u4eba\u7fa4"},i.map((function(e){return r.a.createElement(ft,{value:e.id,key:e.id},e.live_person_name)})))),r.a.createElement(pt,{wrapperCol:{span:5},label:"\u5185\u5bb9\u4e3b\u9898",name:"live_theme_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5185\u5bb9\u4e3b\u9898"}]},r.a.createElement(Le.a,{placeholder:"\u8bf7\u9009\u62e9\u5185\u5bb9\u4e3b\u9898"},c.map((function(e){return r.a.createElement(ft,{value:e.id,key:e.id},e.live_theme_title)})))),r.a.createElement(pt,{label:"\u76f4\u64ad\u5730\u5740",name:"live_url",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u5730\u5740"}]},r.a.createElement(v.a,null)),r.a.createElement(pt,{label:"\u76f4\u64ad\u5c01\u9762",name:"live_img"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u5c01\u9762",upLoadName:"live_img",upLoadAction:"/api/auth/live/upload_live",upLoadImg:a?B+a:"",successCallBack:function(t){g.b.success("\u76f4\u64ad\u8bfe\u7a0b\u5c01\u9762\u4e0a\u4f20\u6210\u529f"),e.setState({imageUrl:t})}})),r.a.createElement(pt,{label:"\u9996\u9875\u5c01\u9762",name:"focus_img"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u7126\u70b9\u56fe",upLoadName:"live_img",upLoadAction:"/api/auth/live/upload_live",upLoadImg:n?B+n:"",successCallBack:function(t){g.b.success("\u76f4\u64ad\u8bfe\u7a0b\u7126\u70b9\u56fe\u4e0a\u4f20\u6210\u529f"),e.setState({focusImgUrl:t})}})),r.a.createElement(pt,{label:"\u662f\u5426\u8bbe\u7f6e\u7126\u70b9",name:"is_focus",valuePropName:"checked"},r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",disabled:!n})),r.a.createElement(pt,{wrapperCol:{span:20}},r.a.createElement("div",{style:{textAlign:"center",marginTop:30}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){return e.props.history.goBack()}},"\u53d6\u6d88")))))}}]),a}(r.a.Component),vt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._loadData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;dt(e,t).then((function(e){e&&1===e.status&&(g.b.success(e.msg),n.setState({liveList:e.data.list,totalSize:e.data.live_count}))})).catch((function(){g.b.error("\u83b7\u53d6\u76f4\u64ad\u8bfe\u7a0b\u5931\u8d25")}))},n.columns=[{title:"ID",dataIndex:"id",width:50,align:"center"},{title:"\u76f4\u64ad\u8bfe\u6807\u9898",dataIndex:"live_title",align:"center"},{title:"\u76f4\u64ad\u5c01\u9762",dataIndex:"live_img",render:function(e){return r.a.createElement("img",{src:B+e,alt:"\u76f4\u64ad\u5c01\u9762",style:{width:100}})},align:"center"},{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"live_begin_time",align:"center"},{title:"\u76f4\u64ad\u8001\u5e08",dataIndex:"live_author",align:"center"},{title:"\u4ef7\u683c",dataIndex:"live_price",align:"center"},{title:"\u9996\u9875\u7126\u70b9",dataIndex:"is_focus",align:"center",render:function(e,t){return r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:t.focus_img?"\u5426":"\u65e0",defaultChecked:1===e,disabled:!t.focus_img,onChange:function(e){var a,n;(a=t.id,n=e?1:0,x("/api/auth/live/set_focus_live",{id:a,is_focus:n})).then((function(a){a&&1===a.status&&(Ye.a.success({message:"\u76f4\u64ad\u8bfe\u7a0b:".concat(t.live_title),description:"".concat(e?"\u8bbe\u7f6e\u4e3a":"\u53d6\u6d88","\u7126\u70b9\u8bfe\u7a0b")}),t.is_focus=e?1:0)}))}})}},{title:"\u64cd\u4f5c",align:"center",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(_.a,{onClick:function(){n.props.history.push({pathname:"/live/edit-live",state:{live:t}})}},"\u7f16\u8f91"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){H.a.confirm({title:"\u786e\u8ba4\u5220\u9664\u5417",content:"\u5220\u9664\u6b64\u8d44\u6e90\u6240\u6709\u5173\u8054\u7684\u5185\u5bb9\u90fd\u4f1a\u88ab\u5220\u9664",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var e;(e=t.id,x("/api/auth/live/delete_live",{id:e})).then((function(e){e&&1===e.status?(g.b.success(e.msg),n._loadData(n.state.pageNum,n.state.pageSize)):g.b.error("\u5220\u9664\u5931\u8d25")})).catch((function(){g.b.error("\u5220\u9664\u5931\u8d25")}))}})}},"\u5220\u9664"))}}],n.state={liveList:[],totalSize:0,pageSize:4,pageNum:1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=r.a.createElement(_.a,{type:"primary",onClick:function(){e.props.history.push("/live/add-live")}},"\u6dfb\u52a0\u76f4\u64ad");return r.a.createElement("div",null,r.a.createElement(ue.a,{title:"\u76f4\u64ad\u5217\u8868",extra:t},r.a.createElement(Pe.a,{rowKey:"id",columns:this.columns,dataSource:this.state.liveList,pagination:{total:this.state.totalSize,pageSize:this.state.pageSize,onChange:function(t,a){return e._loadData(t)}}})))}}]),a}(r.a.Component),gt=h.a.Item,bt=Le.a.Option,Et=st.a.RangePicker,yt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={imageUrl:"",focusImgUrl:"",live_theme:[],live_person:[],live_id:""},n.liveFormRef=r.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.location.state){var t=this.props.location.state.live,a=t.id,n=t.live_title,i=t.live_author,r=t.live_begin_time,c=t.live_end_time,o=t.live_url,l=t.live_price,s=t.live_person_id,u=t.live_theme_id,m=t.is_focus,d=t.live_img,p=t.focus_img;t&&this.liveFormRef.current.setFieldsValue({live_title:n,live_author:i,live_time:[Ne()(r),Ne()(c)],live_url:o,live_price:l,live_person_id:s,live_theme_id:u,is_focus:1===m}),this.setState({imageUrl:d,focusImgUrl:p,live_id:a})}mt().then((function(t){t&&1===t.status&&e.setState({live_person:t.data})})).catch((function(e){console.log(e)})),ut().then((function(t){t&&1===t.status&&e.setState({live_theme:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.imageUrl,n=t.focusImgUrl,i=t.live_person,c=t.live_theme;return r.a.createElement(ue.a,{title:"\u7f16\u8f91\u76f4\u64ad\u8bfe"},r.a.createElement(h.a,Object.assign({},{labelCol:{xs:{span:4}},wrapperCol:{xs:{span:12}}},{onFinish:function(t){var a=e.state,n=a.imageUrl,i=a.focusImgUrl,r=a.live_id,c=t.live_title,o=t.live_author,l=t.live_price,s=t.live_person_id,u=t.live_theme_id,m=t.is_focus,d=t.live_url;if(!n)return g.b.warning("\u8bf7\u4e0a\u4f20\u76f4\u64ad\u5c01\u9762");var p=Ne()(t.live_time[0]).format("YYYY-MM-DD HH:mm:ss"),f=Ne()(t.live_time[1]).format("YYYY-MM-DD HH:mm:ss");(function(e,t,a,n,i,r,c,o,l,s,u,m,d){return x("/api/auth/live/edit",{token:e,id:t,live_title:a,live_author:n,live_img:i,live_begin_time:r,live_end_time:c,live_price:o,live_person_id:l,live_theme_id:s,is_focus:u,focus_img:m,live_url:d},"post")})(z().token,r,c,o,n,p,f,l,s,u,m?1:0,i,d).then((function(t){t&&1===t.status&&(g.b.success(t.msg),e.props.history.goBack())})).catch((function(){g.b.error("\u7f16\u8f91\u76f4\u64ad\u8bfe\u5931\u8d25")}))},ref:this.liveFormRef}),r.a.createElement(gt,{label:"\u76f4\u64ad\u540d\u79f0",name:"live_title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u540d\u79f0"}]},r.a.createElement(v.a,null)),r.a.createElement(gt,{label:"\u76f4\u64ad\u8001\u5e08",name:"live_author",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u8001\u5e08"}]},r.a.createElement(v.a,null)),r.a.createElement(gt,{label:"\u76f4\u64ad\u4ef7\u683c",name:"live_price",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u4ef7\u683c"}]},r.a.createElement(v.a,{type:"number"})),r.a.createElement(gt,{label:"\u76f4\u64ad\u65f6\u95f4",name:"live_time",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u76f4\u64ad\u65f6\u95f4"}]},r.a.createElement(Et,{showTime:!0})),r.a.createElement(gt,{wrapperCol:{span:5},label:"\u9002\u7528\u4eba\u7fa4",name:"live_person_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9002\u7528\u4eba\u7fa4"}]},r.a.createElement(Le.a,{placeholder:"\u8bf7\u9009\u62e9\u9002\u7528\u4eba\u7fa4"},i.map((function(e){return r.a.createElement(bt,{value:e.id,key:e.id},e.live_person_name)})))),r.a.createElement(gt,{wrapperCol:{span:5},label:"\u5185\u5bb9\u4e3b\u9898",name:"live_theme_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5185\u5bb9\u4e3b\u9898"}]},r.a.createElement(Le.a,{placeholder:"\u8bf7\u9009\u62e9\u5185\u5bb9\u4e3b\u9898"},c.map((function(e){return r.a.createElement(bt,{value:e.id,key:e.id},e.live_theme_title)})))),r.a.createElement(gt,{label:"\u76f4\u64ad\u5730\u5740",name:"live_url",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u5730\u5740"}]},r.a.createElement(v.a,null)),r.a.createElement(gt,{label:"\u76f4\u64ad\u5c01\u9762",name:"live_img"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u5c01\u9762",upLoadName:"live_img",upLoadAction:"/api/auth/live/upload_live",upLoadImg:a?B+a:"",successCallBack:function(t){g.b.success("\u76f4\u64ad\u8bfe\u7a0b\u5c01\u9762\u4e0a\u4f20\u6210\u529f"),e.setState({imageUrl:t})}})),r.a.createElement(gt,{label:"\u9996\u9875\u5c01\u9762",name:"focus_img"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u7126\u70b9\u56fe",upLoadName:"live_img",upLoadAction:"/api/auth/live/upload_live",upLoadImg:n?B+n:"",successCallBack:function(t){g.b.success("\u76f4\u64ad\u8bfe\u7a0b\u7126\u70b9\u56fe\u4e0a\u4f20\u6210\u529f"),e.setState({focusImgUrl:t})}})),r.a.createElement(gt,{label:"\u662f\u5426\u8bbe\u7f6e\u7126\u70b9",name:"is_focus",valuePropName:"checked"},r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",disabled:!n})),r.a.createElement(gt,{wrapperCol:{span:20}},r.a.createElement("div",{style:{textAlign:"center",marginTop:30}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"\u4fee\u6539"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){return e.props.history.goBack()}},"\u53d6\u6d88")))))}}]),a}(r.a.Component),kt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/live/add-live",component:ht}),r.a.createElement(f.b,{path:"/live/edit-live",component:yt}),r.a.createElement(f.b,{path:"/live",component:vt}),r.a.createElement(f.b,{component:Oe}))}}]),a}(r.a.Component),jt=(a(533),a(245)),Ct=a(571),Ot=a(569),wt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={tags:[],inputVisible:!1,inputValue:""},e.handleClose=function(t){var a=e.state.tags.filter((function(e){return e!==t}));e.setState({tags:a}),e.props.tagsCallBack(a)},e.showInput=function(){e.setState({inputVisible:!0},(function(){return e.input.focus()}))},e.handleInputChange=function(t){e.setState({inputValue:t.target.value})},e.handleInputConfirm=function(){var t=e.state.inputValue,a=e.state.tags;t&&-1===a.indexOf(t)&&(a=[].concat(Object(Ct.a)(a),[t])),e.setState({tags:a,inputVisible:!1,inputValue:""}),e.props.tagsCallBack(a)},e.saveInputRef=function(t){e.input=t},e.forMap=function(t){var a=r.a.createElement(jt.a,{closable:!0,onClose:function(a){a.preventDefault(),e.handleClose(t)}},t);return r.a.createElement("span",{key:t,style:{display:"inline-block"}},a)},e}return Object(s.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){e.tagsArr&&this.setState({tags:e.tagsArr})}},{key:"render",value:function(){var e=this.state,t=e.tags,a=e.inputVisible,n=e.inputValue,i=t.map(this.forMap);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot.a,{enter:{scale:.8,opacity:0,type:"from",duration:100,onComplete:function(e){e.target.style=""}},leave:{opacity:0,width:0,scale:0,duration:200},appear:!1},i),r.a.createElement("div",{style:{marginBottom:10,display:t.length?"block":"none"}}),a&&r.a.createElement(v.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:n,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!a&&r.a.createElement(jt.a,{onClick:this.showInput,className:"site-tag-plus"},r.a.createElement(be.a,null)," \u6dfb\u52a0\u6807\u7b7e"))}}]),a}(r.a.Component),St=function(){return x("/api/auth/activities/activities_address")},Lt=function(){return x("/api/auth/activities/activities_object")},It=function(){return x("/api/auth/activities/activities_bus")},xt=function(e,t){return x("/api/auth/activities/list",{page_num:e,page_size:t})},Nt=h.a.Item,Ut=Le.a.Option,Dt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={imageUrl:"",focusImgUrl:"",activities_address:[],activities_object:[],activities_bus:[],tags:[]},n.activities_intro_ref=r.a.createRef(),n.activities_trip_ref=r.a.createRef(),n.activities_days_ref=r.a.createRef(),n.activities_notice_ref=r.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;It().then((function(t){t&&1===t.status&&e.setState({activities_bus:t.data})})).catch((function(e){console.log(e)})),Lt().then((function(t){t&&1===t.status&&e.setState({activities_object:t.data})})).catch((function(e){console.log(e)})),St().then((function(t){t&&1===t.status&&e.setState({activities_address:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.imageUrl,n=t.focusImgUrl,i=t.activities_address,c=t.activities_object,o=t.activities_bus;return r.a.createElement(ue.a,{title:"\u65b0\u589e\u6d3b\u52a8"},r.a.createElement(h.a,Object.assign({},{labelCol:{xs:{span:4}},wrapperCol:{xs:{span:12}}},{onFinish:function(t){console.log(t);var a=e.state,n=a.imageUrl,i=a.focusImgUrl,r=a.tags;if(!n)return g.b.warn("\u8bf7\u4e0a\u4f20\u6d3b\u52a8\u5c01\u9762");var c=Ne()(t.activities_time).format("YYYY-MM-DD HH:mm:ss"),o=t.activities_name,l=t.activities_price,s=t.activities_address_id,u=t.activities_object_id,m=t.activities_bus_day_id,d=t.activities_count,p=t.is_focus,f=r.join(","),_=e.activities_intro_ref.current.getContent(),h=e.activities_trip_ref.current.getContent(),v=e.activities_days_ref.current.getContent(),b=e.activities_notice_ref.current.getContent();console.log(_),function(e,t,a,n,i,r,c,o,l,s,u,m,d,p,f,_){return x("/api/auth/activities/add",{token:e,activities_name:t,activities_time:a,activities_img:n,activities_price:i,activities_tag:r,activities_count:c,activities_address_id:o,activities_object_id:l,activities_bus_day_id:s,activities_intro:u,activities_trip:m,activities_day:d,activities_notice:p,is_focus:f,focus_img:_},"post")}(z().token,o,c,n,l,f,d,s,u,m,_,h,v,b,p?1:0,i).then((function(t){console.log(t),1===(null===t||void 0===t?void 0:t.status)&&(g.b.success("\u6dfb\u52a0\u6d3b\u52a8\u6210\u529f"),e.props.history.goBack())})).catch((function(){g.b.error("\u6dfb\u52a0\u6d3b\u52a8\u5931\u8d25")}))}}),r.a.createElement(Nt,{label:"\u6d3b\u52a8\u540d\u79f0",name:"activities_name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6d3b\u52a8\u540d\u79f0"}]},r.a.createElement(v.a,null)),r.a.createElement(Nt,{label:"\u6d3b\u52a8\u65e5\u671f",name:"activities_time",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6d3b\u52a8\u65e5\u671f"}]},r.a.createElement(st.a,null)),r.a.createElement(Nt,{label:"\u6d3b\u52a8\u4ef7\u683c",name:"activities_price",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6d3b\u52a8\u4ef7\u683c"}]},r.a.createElement(v.a,{type:"number"})),r.a.createElement(Nt,{label:"\u62a5\u540d\u4eba\u6570",name:"activities_count",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6d3b\u52a8\u4ef7\u683c"}]},r.a.createElement(v.a,{type:"number"})),r.a.createElement(Nt,{label:"\u6d3b\u52a8\u5730\u70b9",name:"activities_address_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6d3b\u52a8\u5730\u70b9"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6d3b\u52a8\u5730\u70b9"},i.map((function(e){return r.a.createElement(Ut,{key:e.id,value:e.id},e.activities_address)})))),r.a.createElement(Nt,{label:"\u62db\u751f\u5bf9\u8c61",name:"activities_object_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u62db\u751f\u5bf9\u8c61"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u62db\u751f\u5bf9\u8c61"},c.map((function(e){return r.a.createElement(Ut,{key:e.id,value:e.id},e.activities_object_name)})))),r.a.createElement(Nt,{label:"\u9009\u62e9\u8425\u671f",name:"activities_bus_day_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8425\u671f"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u8425\u671f"},o.map((function(e){return r.a.createElement(Ut,{key:e.id,value:e.id},e.activities_bus_day)})))),r.a.createElement(Nt,{label:"\u6d3b\u52a8\u6807\u7b7e"},r.a.createElement(wt,{tagsCallBack:function(t){e.setState({tags:t})}})),r.a.createElement(Nt,{label:"\u6d3b\u52a8\u5c01\u9762\u56fe",name:"activities_img"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u5c01\u9762",upLoadName:"activities_img",upLoadAction:"/api/auth/activities/upload_activities",upLoadImg:a?B+a:"",successCallBack:function(t){g.b.success("\u6d3b\u52a8\u5c01\u9762\u4e0a\u4f20\u6210\u529f"),e.setState({imageUrl:t})}})),r.a.createElement(Nt,{label:"\u9996\u9875\u8f6e\u64ad\u56fe",name:"focus_img"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u7126\u70b9\u56fe",upLoadName:"activities_img",upLoadAction:"/api/auth/activities/upload_activities",upLoadImg:n?B+n:"",successCallBack:function(t){g.b.success("\u6d3b\u52a8\u7126\u70b9\u56fe\u4e0a\u4f20\u6210\u529f"),e.setState({focusImgUrl:t})}})),r.a.createElement(Nt,{label:"\u662f\u5426\u8bbe\u7f6e\u7126\u70b9",name:"is_focus",valuePropName:"checked"},r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",disabled:!n})),r.a.createElement(Nt,{label:"\u6d3b\u52a8\u4ecb\u7ecd",name:"activities_intro",wrapperCol:{span:20}},r.a.createElement(it,{ref:this.activities_intro_ref,upLoadAction:"/api/auth/activities/upload_activities",uploadName:"activities_img"})),r.a.createElement(Nt,{label:"\u884c\u7a0b\u5b89\u6392",name:"activities_trip",wrapperCol:{span:20}},r.a.createElement(it,{ref:this.activities_trip_ref,upLoadAction:"/api/auth/activities/upload_activities",uploadName:"activities_img"})),r.a.createElement(Nt,{label:"\u5f00\u8425\u65e5\u671f",name:"activities_days",wrapperCol:{span:20}},r.a.createElement(it,{ref:this.activities_days_ref,upLoadAction:"/api/auth/activities/upload_activities",uploadName:"activities_img"})),r.a.createElement(Nt,{label:"\u6ce8\u610f\u4e8b\u9879",name:"activities_notice",wrapperCol:{span:20}},r.a.createElement(it,{ref:this.activities_notice_ref,upLoadAction:"/api/auth/activities/upload_activities",uploadName:"activities_img"})),r.a.createElement(Nt,{wrapperCol:{span:20}},r.a.createElement("div",{style:{textAlign:"center",marginTop:30}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){return e.props.history.goBack()}},"\u53d6\u6d88")))))}}]),a}(r.a.Component),Tt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._loadData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;xt(e,t).then((function(e){e&&1===e.status&&(g.b.success(e.msg),n.setState({activitiesList:e.data.activities_list,totalSize:e.data.activities_count}))})).catch((function(){g.b.error("\u83b7\u53d6\u6d3b\u52a8\u5217\u8868\u5931\u8d25")}))},n.columns=[{title:"ID",dataIndex:"id",width:50,align:"center"},{title:"\u6d3b\u52a8\u540d\u79f0",dataIndex:"activities_name",align:"center"},{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"activities_time",align:"center"},{title:"\u6d3b\u52a8\u5c01\u9762",dataIndex:"activities_img",render:function(e){return r.a.createElement("img",{src:B+e,alt:"\u6d3b\u52a8\u5c01\u9762",style:{width:100}})},align:"center"},{title:"\u6d3b\u52a8\u4ef7\u683c",dataIndex:"activities_price",align:"center"},{title:"\u6d3b\u52a8\u5929\u6570",dataIndex:"activities_bus_day_id",align:"center"},{title:"\u9996\u9875\u7126\u70b9",dataIndex:"is_focus",render:function(e,t){return r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",defaultChecked:1===e,disabled:!t.focus_img,onChange:function(e){var a,n;(a=t.id,n=e?1:0,x("/api/auth/activities/set_focus_activities",{id:a,is_focus:n})).then((function(a){a&&1===a.status&&(Ye.a.success({message:"\u6d3b\u52a8: ".concat(t.activities_name),description:"".concat(e?"\u8bbe\u7f6e\u4e3a":"\u53d6\u6d88","\u9996\u9875\u6d3b\u52a8\u7126\u70b9")}),t.is_focus=e?1:0)}))}})},align:"center"},{title:"\u64cd\u4f5c",align:"center",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(_.a,{onClick:function(){n.props.history.push({pathname:"/activities/edit-activities",state:{activities:t}})}},"\u7f16\u8f91"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){H.a.confirm({title:"\u786e\u8ba4\u5220\u9664\u5417",content:"\u5220\u9664\u6b64\u8d44\u6e90\u6240\u6709\u5173\u8054\u7684\u5185\u5bb9\u90fd\u4f1a\u88ab\u5220\u9664",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var e;(e=t.id,x("/api/auth/activities/delete_activities",{id:e})).then((function(e){e&&1===e.status?(g.b.success(e.msg),n._loadData(n.state.pageNum,n.state.pageSize)):g.b.error("\u5220\u9664\u5931\u8d25")})).catch((function(){g.b.error("\u5220\u9664\u5931\u8d25")}))}})}},"\u5220\u9664"))}}],n.state={activitiesList:[],totalSize:0,pageSize:4},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=r.a.createElement(_.a,{type:"primary",onClick:function(){e.props.history.push("/activities/add-activities")}},"\u6dfb\u52a0\u6d3b\u52a8");return r.a.createElement("div",null,r.a.createElement(ue.a,{title:"\u6d3b\u52a8\u5217\u8868",extra:t},r.a.createElement(Pe.a,{rowKey:"id",columns:this.columns,dataSource:this.state.activitiesList,pagination:{total:this.state.totalSize,pageSize:this.state.pageSize,onChange:function(t,a){e._loadData(t)}}})))}}]),a}(r.a.Component),Bt=h.a.Item,qt=Le.a.Option,At=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={id:"",imageUrl:"",focusImgUrl:"",activities_address:[],activities_object:[],activities_bus:[],tags:[],activities_intro:"",activities_trip:"",activities_day:"",activities_notice:""},n.activities_intro_ref=r.a.createRef(),n.activities_trip_ref=r.a.createRef(),n.activities_days_ref=r.a.createRef(),n.activities_notice_ref=r.a.createRef(),n.activities_form_ref=r.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(!this.props.location.state)return this.props.history.goBack();var t=this.props.location.state.activities;t&&(console.log(t),t.activities_time=Ne()(t.activities_time),this.activities_form_ref.current.setFieldsValue(t),t.activities_tag&&this.setState({tags:t.activities_tag.split(",")}),this.setState({id:t.id,imageUrl:t.activities_img,focusImgUrl:t.focus_img,activities_intro:t.activities_intro,activities_trip:t.activities_trip,activities_day:t.activities_day,activities_notice:t.activities_notice})),It().then((function(t){t&&1===t.status&&e.setState({activities_bus:t.data})})).catch((function(e){console.log(e)})),Lt().then((function(t){t&&1===t.status&&e.setState({activities_object:t.data})})).catch((function(e){console.log(e)})),St().then((function(t){t&&1===t.status&&e.setState({activities_address:t.data})})).catch((function(e){console.log(e)}))}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){return!1}}},{key:"render",value:function(){var e=this,t=this.state,a=t.id,n=t.imageUrl,i=t.focusImgUrl,c=t.activities_address,o=t.activities_object,l=t.activities_bus,s=t.tags;return r.a.createElement(ue.a,{title:"\u65b0\u589e\u6d3b\u52a8"},r.a.createElement(h.a,Object.assign({},{labelCol:{xs:{span:4}},wrapperCol:{xs:{span:12}}},{onFinish:function(t){console.log(t);var n=e.state,i=n.imageUrl,r=n.focusImgUrl,c=n.tags;if(!i)return g.b.warn("\u8bf7\u4e0a\u4f20\u6d3b\u52a8\u5c01\u9762");var o=Ne()(t.activities_time).format("YYYY-MM-DD HH:mm:ss"),l=t.activities_name,s=t.activities_price,u=t.activities_address_id,m=t.activities_object_id,d=t.activities_bus_day_id,p=t.activities_count,f=t.is_focus,_=c.join(","),h=e.activities_intro_ref.current.getContent(),v=e.activities_trip_ref.current.getContent(),b=e.activities_days_ref.current.getContent(),E=e.activities_notice_ref.current.getContent();console.log(h),function(e,t,a,n,i,r,c,o,l,s,u,m,d,p,f,_,h){return x("/api/auth/activities/edit",{token:e,id:t,activities_name:a,activities_time:n,activities_img:i,activities_price:r,activities_tag:c,activities_count:o,activities_address_id:l,activities_object_id:s,activities_bus_day_id:u,activities_intro:m,activities_trip:d,activities_day:p,activities_notice:f,is_focus:_,focus_img:h},"post")}(z().token,a,l,o,i,s,_,p,u,m,d,h,v,b,E,f?1:0,r).then((function(t){console.log(t),1===(null===t||void 0===t?void 0:t.status)&&(g.b.success("\u4fee\u6539\u6d3b\u52a8\u6210\u529f"),e.props.history.goBack())})).catch((function(){g.b.error("\u4fee\u6539\u6d3b\u52a8\u5931\u8d25")}))},ref:this.activities_form_ref}),r.a.createElement(Bt,{label:"\u6d3b\u52a8\u540d\u79f0",name:"activities_name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6d3b\u52a8\u540d\u79f0"}]},r.a.createElement(v.a,null)),r.a.createElement(Bt,{label:"\u6d3b\u52a8\u65e5\u671f",name:"activities_time",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6d3b\u52a8\u65e5\u671f"}]},r.a.createElement(st.a,null)),r.a.createElement(Bt,{label:"\u6d3b\u52a8\u4ef7\u683c",name:"activities_price",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6d3b\u52a8\u4ef7\u683c"}]},r.a.createElement(v.a,{type:"number"})),r.a.createElement(Bt,{label:"\u62a5\u540d\u4eba\u6570",name:"activities_count",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6d3b\u52a8\u4ef7\u683c"}]},r.a.createElement(v.a,{type:"number"})),r.a.createElement(Bt,{label:"\u6d3b\u52a8\u5730\u70b9",name:"activities_address_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6d3b\u52a8\u5730\u70b9"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u6d3b\u52a8\u5730\u70b9"},c.map((function(e){return r.a.createElement(qt,{key:e.id,value:e.id},e.activities_address)})))),r.a.createElement(Bt,{label:"\u62db\u751f\u5bf9\u8c61",name:"activities_object_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u62db\u751f\u5bf9\u8c61"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u62db\u751f\u5bf9\u8c61"},o.map((function(e){return r.a.createElement(qt,{key:e.id,value:e.id},e.activities_object_name)})))),r.a.createElement(Bt,{label:"\u9009\u62e9\u8425\u671f",name:"activities_bus_day_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8425\u671f"}]},r.a.createElement(Le.a,{style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u8425\u671f"},l.map((function(e){return r.a.createElement(qt,{key:e.id,value:e.id},e.activities_bus_day)})))),r.a.createElement(Bt,{label:"\u6d3b\u52a8\u6807\u7b7e"},r.a.createElement(wt,{tagsArr:s,tagsCallBack:function(t){e.setState({tags:t})}})),r.a.createElement(Bt,{label:"\u6d3b\u52a8\u5c01\u9762\u56fe",name:"activities_img"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u5c01\u9762",upLoadName:"activities_img",upLoadAction:"/api/auth/activities/upload_activities",upLoadImg:n?B+n:"",successCallBack:function(t){g.b.success("\u6d3b\u52a8\u5c01\u9762\u4e0a\u4f20\u6210\u529f"),e.setState({imageUrl:t})}})),r.a.createElement(Bt,{label:"\u9996\u9875\u8f6e\u64ad\u56fe",name:"focus_img"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u7126\u70b9\u56fe",upLoadName:"activities_img",upLoadAction:"/api/auth/activities/upload_activities",upLoadImg:i?B+i:"",successCallBack:function(t){g.b.success("\u6d3b\u52a8\u7126\u70b9\u56fe\u4e0a\u4f20\u6210\u529f"),e.setState({focusImgUrl:t})}})),r.a.createElement(Bt,{label:"\u662f\u5426\u8bbe\u7f6e\u7126\u70b9",name:"is_focus",valuePropName:"checked"},r.a.createElement(Se.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",disabled:!i})),r.a.createElement(Bt,{label:"\u6d3b\u52a8\u4ecb\u7ecd",name:"activities_intro",wrapperCol:{span:20}},r.a.createElement(it,{ref:this.activities_intro_ref,upLoadAction:"/api/auth/activities/upload_activities",uploadName:"activities_img",htmlContent:this.state.activities_intro})),r.a.createElement(Bt,{label:"\u884c\u7a0b\u5b89\u6392",name:"activities_trip",wrapperCol:{span:20}},r.a.createElement(it,{ref:this.activities_trip_ref,upLoadAction:"/api/auth/activities/upload_activities",uploadName:"activities_img",htmlContent:this.state.activities_trip})),r.a.createElement(Bt,{label:"\u5f00\u8425\u65e5\u671f",name:"activities_days",wrapperCol:{span:20}},r.a.createElement(it,{ref:this.activities_days_ref,upLoadAction:"/api/auth/activities/upload_activities",uploadName:"activities_img",htmlContent:this.state.activities_day})),r.a.createElement(Bt,{label:"\u6ce8\u610f\u4e8b\u9879",name:"activities_notice",wrapperCol:{span:20}},r.a.createElement(it,{ref:this.activities_notice_ref,upLoadAction:"/api/auth/activities/upload_activities",uploadName:"activities_img",htmlContent:this.state.activities_notice})),r.a.createElement(Bt,{wrapperCol:{span:20}},r.a.createElement("div",{style:{textAlign:"center",marginTop:30}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"\u4fee\u6539"),r.a.createElement(he.a,{type:"vertical"}),r.a.createElement(_.a,{onClick:function(){return e.props.history.goBack()}},"\u53d6\u6d88")))))}}]),a}(r.a.Component),Mt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/activities/add-activities",component:Dt}),r.a.createElement(f.b,{path:"/activities/edit-activities",component:At}),r.a.createElement(f.b,{path:"/activities",component:Tt}),r.a.createElement(f.b,{component:Oe}))}}]),a}(r.a.Component),Ft=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).handleCancel=function(t){console.log(t),e.props.hideFunc()},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.visible;return r.a.createElement(H.a,{title:"\u4fee\u6539\u5bc6\u7801",visible:t,onCancel:this.handleCancel,footer:null},r.a.createElement(h.a,{onFinish:function(t){if(console.log(t),t.old_password===t.new_password)return g.b.warning("\u65b0\u5bc6\u7801\u548c\u65e7\u5bc6\u7801\u4e0d\u80fd\u4e00\u81f4");var a=k()(t.old_password,q),n=k()(t.new_password,q);(function(e,t,a){return x("/api/auth/admin/reset_pwd",{token:e,old_pwd:t,new_pwd:a},"post")})(z().token,a,n).then((function(t){t&&1===t.status?(g.b.success(t.msg),R(),e.props.history.replace("/login")):t&&0===t.status?g.b.error(t.msg):g.b.error("\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef")})).catch((function(){g.b.error("\u4fee\u6539\u5bc6\u7801\u5931\u8d25")}))},ref:this.formRef,style:{textAlign:"center"}},r.a.createElement(h.a.Item,{name:"old_password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801"}]},r.a.createElement(v.a,{prefix:r.a.createElement(E.a,null),type:"password",placeholder:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801"})),r.a.createElement(h.a.Item,{name:"new_password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"}]},r.a.createElement(v.a,{prefix:r.a.createElement(E.a,null),type:"password",placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"})),r.a.createElement(h.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"\u4fee\u6539\u5bc6\u7801"))))}}]),a}(r.a.Component),Rt=Object(f.g)(Ft),zt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).editPassword=function(){n.setState({editPwdPanelShow:!0})},n._hidePwdPanel=function(){n.setState({editPwdPanelShow:!1})},n.state={account_icon:"",editPwdPanelShow:!1,account:"",account_name:"",token:""},n.formRef=r.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=z();this.setState({account:t.account,account_name:t.account_name,account_icon:t.account_icon,token:t.token},(function(){var t=e.state,a=t.account,n=t.account_name;e.formRef.current.setFieldsValue({account:a,account_name:n})}))}},{key:"render",value:function(){var e=this,t=this.state.account_icon;return r.a.createElement(ue.a,{title:"\u7ba1\u7406\u5458\u4fe1\u606f\u7f16\u8f91"},r.a.createElement(h.a,Object.assign({},{labelCol:{sm:{span:6}},wrapperCol:{sm:{span:8}}},{onFinish:function(t){console.log(t);var a=e.state,n=a.token,i=a.account_icon;(function(e,t,a){return x("/api/auth/admin/edit",{token:e,account_name:t,account_icon:a},"post")})(n,t.account_name,i).then((function(e){e&&1===e.status&&(F(e.data),g.b.success(e.msg),L.a.publish("changeAdminMsg",{}))})).catch((function(e){g.b.error("\u7ba1\u7406\u5458\u4fe1\u606f\u4fee\u6539\u5931\u8d25")}))},ref:this.formRef}),r.a.createElement(h.a.Item,{label:"\u8d26\u6237\u540d",name:"account"},r.a.createElement(v.a,{disabled:!0})),r.a.createElement(h.a.Item,{label:"\u7ba1\u7406\u5458\u540d\u79f0",name:"account_name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ba1\u7406\u5458\u540d\u79f0"}]},r.a.createElement(v.a,{placeholder:"\u8bf7\u6dfb\u52a0\u4e00\u4e2a\u6635\u79f0"})),r.a.createElement(h.a.Item,{label:"\u7ba1\u7406\u5458\u5934\u50cf",name:"account_icon"},r.a.createElement(ye,{upLoadBtnTitle:"\u4e0a\u4f20\u5934\u50cf",upLoadName:"admin_avatar",upLoadAction:"/api/auth/admin/upload_admin_icon",successCallBack:function(t){console.log(t),e.setState({account_icon:t})},upLoadImg:B+t})),r.a.createElement(h.a.Item,{wrapperCol:{xs:{span:24}}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"\u4fee\u6539"),r.a.createElement("div",{style:{marginLeft:10}},"\u6216\u8005 ",r.a.createElement("span",{style:{color:"blue",cursor:"pointer"},onClick:this.editPassword},"\u4fee\u6539\u5bc6\u7801"))))),r.a.createElement(Rt,{visible:this.state.editPwdPanelShow,hideFunc:this._hidePwdPanel}))}}]),a}(r.a.Component),Pt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{backgroundColor:"gold"}},r.a.createElement("h1",null,"\u4f1a\u5458\u7edf\u8ba1"))}}]),a}(r.a.Component),Yt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/setting/account",component:zt}),r.a.createElement(f.b,{path:"/setting/member",component:Pt}),r.a.createElement(f.b,{component:Oe})))}}]),a}(r.a.Component),Ht=V.a.Content,Vt=V.a.Footer,Kt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={collapsed:!1},e.toggle=function(){e.setState({collapsed:!e.state.collapsed})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;L.a.subscribe("tokenOut",(function(t){"tokenOut"===t&&H.a.warn({title:"\u767b\u5f55\u4fe1\u606f\u8fc7\u671f",content:r.a.createElement("div",null,r.a.createElement("p",null,"\u8bf7\u91cd\u65b0\u767b\u5f55\u540e\u518d\u64cd\u4f5c")),onOk:function(){e.props.history.replace("/login")}})}))}},{key:"componentWillUnmount",value:function(){L.a.unsubscribe("tokenOut")}},{key:"render",value:function(){return T(A).token?r.a.createElement(V.a,{className:"admin-pane"},r.a.createElement(ee,{collapsed:this.state.collapsed}),r.a.createElement(V.a,null,r.a.createElement(oe,{collapsed:this.state.collapsed,toggle:this.toggle}),r.a.createElement(Ht,{className:"admin-content"},r.a.createElement(f.d,null,r.a.createElement(f.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(f.b,{path:"/home",component:we}),r.a.createElement(f.b,{path:"/resource",component:Je}),r.a.createElement(f.b,{path:"/lifejob",component:lt}),r.a.createElement(f.b,{path:"/activities",component:Mt}),r.a.createElement(f.b,{path:"/live",component:kt}),r.a.createElement(f.b,{path:"/setting",component:Yt}),r.a.createElement(f.b,{component:Oe}))),r.a.createElement(Vt,{className:"admin-footer"},"\u5f15\u64ce\u8ba1\u5212-\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"))):r.a.createElement(f.a,{to:"/login"})}}]),a}(i.Component),Gt=Object(d.b)(null,null)(Kt),Wt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/login",component:Y}),r.a.createElement(f.b,{path:"/",component:Gt})))}}]),a}(r.a.Component),Jt=Object(d.b)((function(e){return{}}),(function(e){return{}}))(Wt),Xt=a(572),Qt=(a(1233),a(161)),Zt=a(570),$t=$e.a.mark(ea);function ea(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),$t)}var ta=ea,aa=(a(1234),{}),na=Object(Zt.a)(),ia=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Qt.c)(Object(Qt.a)(na)),ra=Object(Qt.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa;return e}),ia);na.run(ta);var ca=ra;Ne.a.locale("zh-cn"),o.a.render(r.a.createElement(d.a,{store:ca},r.a.createElement(n.a,{locale:Xt.a},r.a.createElement(Jt,null))),document.getElementById("root"))},416:function(e,t,a){},546:function(e,t,a){e.exports=a.p+"static/media/xiaoliao.3a9407b0.png"},551:function(e){e.exports=JSON.parse('[{"id":1,"title":"\u9996\u9875","_key":"/home","icon":"icon-changjingguanli","prentID":0},{"id":2,"title":"\u5e7c\u6559\u8d44\u6e90\u7ba1\u7406","_key":"/resource","icon":"icon-gongnengdingyi","prentID":0},{"id":3,"title":"\u804c\u573a\u4eba\u751f\u7ba1\u7406","_key":"/lifejob","icon":"icon-hezuohuobanmiyueguanli","prentID":0},{"id":4,"title":"\u6d3b\u52a8\u4e13\u533a\u7ba1\u7406","_key":"/activities","icon":"icon-yibiaopan","prentID":0},{"id":5,"title":"\u76f4\u64ad\u8bfe\u5802\u7ba1\u7406","_key":"/live","icon":"icon-icon_fabu","prentID":0},{"id":6,"title":"\u8bbe\u7f6e\u4e2d\u5fc3","_key":"/setting","icon":"icon-icon_shezhi","prentID":0,"children":[{"id":7,"title":"\u8d26\u6237\u8bbe\u7f6e","_key":"/setting/account","icon":"icon-fuwudiqiu","prentID":6},{"id":8,"title":"\u4f1a\u5458\u7edf\u8ba1","_key":"/setting/member","icon":"icon-shenjing","prentID":6}]}]')},552:function(e,t,a){e.exports=a.p+"static/media/xiaoliao.3a9407b0.png"},574:function(e,t,a){e.exports=a(1235)},590:function(e,t,a){},717:function(e,t,a){},718:function(e,t,a){},726:function(e,t,a){},737:function(e,t,a){},738:function(e,t,a){}},[[574,1,2]]]);
//# sourceMappingURL=main.42ffc6ed.chunk.js.map